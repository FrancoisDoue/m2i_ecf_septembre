FROM node:14-alpine

#ARG AUTHENTICATION_SERVICE_URL
#ARG COMMON_DATA_SERVICE_URL
#ARG PAYMENT_SERVICE_URL
#ARG SEARCH_SUGGESTION_SERVICE_URL
ARG PROXY

#ENV REACT_APP_PAYMENT_SERVICE_URL=${PAYMENT_SERVICE_URL}
#ENV REACT_APP_AUTHENTICATION_SERVICE_URL=${AUTHENTICATION_SERVICE_URL}
#ENV REACT_APP_COMMON_DATA_SERVICE_URL=${COMMON_DATA_SERVICE_URL}
#ENV REACT_APP_SEARCH_SUGGESTION_SERVICE_URL=${SEARCH_SUGGESTION_SERVICE_URL}

ENV REACT_APP_PAYMENT_SERVICE_URL=${PROXY}
ENV REACT_APP_AUTHENTICATION_SERVICE_URL=${PROXY}
ENV REACT_APP_COMMON_DATA_SERVICE_URL=${PROXY}
ENV REACT_APP_SEARCH_SUGGESTION_SERVICE_URL=${PROXY}

WORKDIR /usr/src/app
COPY . .

RUN npm install

RUN npm run build
EXPOSE 3000
CMD [ "node", "server.js"]

